{
  "name": "Gmail Auto Summary",
  "nodes": [
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "c7fb4536-bb56-4a87-a7b8-1e73e2fdfe61",
              "leftValue": "=={{ $json[\"labelIds\"] ? $json[\"labelIds\"].includes(\"CATEGORY_PROMOTIONS\") || $json[\"labelIds\"].includes(\"CATEGORY_SOCIAL\") : false }}",
              "rightValue": "true",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -256,
        -112
      ],
      "id": "d60e733b-d578-439c-a08f-49b45ec03454",
      "name": "If"
    },
    {
      "parameters": {
        "operation": "removeLabels",
        "messageId": "=={{ $json.id }}",
        "labelIds": [
          "INBOX"
        ]
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.2,
      "position": [
        48,
        -304
      ],
      "id": "53c587c0-c13c-4f4d-bf2d-a3f815d68fbc",
      "name": "Remove label from message",
      "webhookId": "94f30344-d5cb-4783-8890-ee4482c6268a"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 2
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        -704,
        -112
      ],
      "id": "4f501bcc-c8a0-4d70-aaff-a2aeec51d91f",
      "name": "â° Daily Schedule"
    },
    {
      "parameters": {
        "operation": "getAll",
        "limit": 20,
        "filters": {
          "q": "newer_than:1d label:INBOX -category:promotions -category:social -from:shazada.abdullah98@gmail.com"
        }
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.2,
      "position": [
        -480,
        -112
      ],
      "id": "2a39d1f0-2fbc-4994-9e3c-ab0854db7a66",
      "name": "ğŸ“¥ Gmail: Fetch Important Emails",
      "webhookId": "eea1ad3f-5a53-4bad-bf2b-a3cd6146ac02",
      "credentials": {
        "gmailOAuth2": {
          "id": "rytmWrlNaI7AqYiA",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "GPT-4O-MINI"
        },
        "responses": {
          "values": [
            {
              "content": "=You are a helpful assistant. Summarize this email into 2-3 concise bullet points in Urdu + simple English mix.\n\nIf the email content is empty or too short, reply with: \"Short email, please check inbox.\"\n\nEmail Details:\nSubject: {{ $json.subject || 'No Subject' }}\nFrom: {{ $json.from || 'Unknown Sender' }}\nContent: {{ $json.snippet || $json.text || 'No content found' }}"
            }
          ]
        },
        "builtInTools": {},
        "options": {
          "maxTokens": 500,
          "temperature": 0.3,
          "topP": 1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [
        -32,
        -16
      ],
      "id": "121add53-ffed-40a6-acef-b0a4f6b1ff0d",
      "name": "ğŸ¤– AI: Summarize in Urdu + English",
      "credentials": {
        "openAiApi": {
          "id": "Soxcnc9nqzCSGJbF",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "let allSummaries = \"\";\nlet count = 0;\n\nfor (let i = 0; i < items.length; i++) {\n  let item = items[i].json;\n  let text = \"\";\n\n  // Check every possible location for AI text\n  if (item.output && Array.isArray(item.output) && item.output[0]?.content?.[0]?.text) {\n    text = item.output[0].content[0].text;\n  } else if (item.output && typeof item.output === 'string') {\n    text = item.output;\n  } else if (item.text) {\n    text = item.text;\n  } else {\n    // If everything fails, just take the first string found in the object\n    text = JSON.stringify(item.output || item);\n  }\n\n  allSummaries += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\nğŸ“§ Email ${i + 1}\\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n\\n${text}\\n\\n`;\n  count++;\n}\n\nconst now = new Date();\nreturn [{\n  json: {\n    summary: allSummaries.trim(),\n    totalEmails: count,\n    sheetDate: now.toISOString().split('T')[0],\n    sheetDay: now.toLocaleDateString('en-US', { weekday: 'long' }),\n    sheetTime: now.toTimeString().split(' ')[0],\n    sheetTimestamp: now.toISOString().replace('T', ' ').substring(0, 19)\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        544,
        -16
      ],
      "id": "b618e0f9-27f1-4c16-abe4-6b2f14454da4",
      "name": "ğŸ”§ Aggregate All Summaries"
    },
    {
      "parameters": {
        "sendTo": "shazada.abdullah98@gmail.com",
        "subject": "Daily Email Summary - n8n Automation",
        "message": "=<div style=\"font-family: 'Segoe UI', Arial, sans-serif; max-width: 700px; margin: 0 auto; background: #f5f5f5; padding: 20px;\">\n  \n  <div style=\"background: linear-gradient(135deg, #4285f4 0%, #34a853 100%); padding: 30px; border-radius: 10px 10px 0 0; text-align: center;\">\n    <h1 style=\"color: white; margin: 0; font-size: 28px;\">ğŸ“¬ Daily Email Intelligence Report</h1>\n    <p style=\"color: #e8f0fe; margin: 10px 0 0 0;\">Automated by n8n | AI-Powered Summaries</p>\n  </div>\n  \n  <div style=\"background: white; padding: 20px; border-left: 5px solid #4285f4; margin: 20px 0;\">\n    <p style=\"margin: 5px 0; color: #666;\">\n      ğŸ“Š <strong>Total Emails Processed:</strong> {{ $node[\"ğŸ”§ Aggregate All Summaries\"].json.totalEmails }}<br>\n      ğŸ• <strong>Generated:</strong> {{ $now.toFormat('dd MMMM yyyy, HH:mm') }} PKT<br>\n      ğŸ¤– <strong>AI Model:</strong> GPT-4o-mini\n    </p>\n  </div>\n  \n  <div style=\"background: white; padding: 30px; border-radius: 5px;\">\n    <h2 style=\"color: #4285f4; border-bottom: 2px solid #e0e0e0; padding-bottom: 10px;\">ğŸ“§ Email Summaries</h2>\n    <div style=\"white-space: pre-wrap; line-height: 1.8; color: #333; font-size: 14px;\">{{ $node[\"ğŸ”§ Aggregate All Summaries\"].json.summary }}</div>\n  </div>\n  \n  <div style=\"background: #333; color: white; padding: 20px; text-align: center; border-radius: 0 0 10px 10px; margin-top: 20px;\">\n    <p style=\"margin: 0; font-size: 14px; font-weight: bold; letter-spacing: 1.5px;\">\n      ğŸ‘¨â€ğŸ’» Abdullah Zahid\n    </p>\n  </div>\n  \n</div>",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.2,
      "position": [
        768,
        -16
      ],
      "id": "12beca7e-1a3d-4f28-afc4-c0290fa3931d",
      "name": "ğŸ“§ Gmail: Send Summary Email",
      "webhookId": "135877f8-7f8e-4f61-81d7-2f7b6f4c57b7",
      "credentials": {
        "gmailOAuth2": {
          "id": "rytmWrlNaI7AqYiA",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "content": "ğŸ“Œ Project: Gmail Auto-Summarizer\nğŸ¯ Purpose: Daily email intelligence\nğŸ‘¨â€ğŸ“ Student: Abdullah Zahid\nğŸ“… Date: Jan 2026\n",
        "height": 96,
        "width": 272
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -784,
        -224
      ],
      "typeVersion": 1,
      "id": "c6ccc685-8782-42aa-9cb7-14d5a7e7c458",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "ğŸ’¡ Uses OpenAI GPT-4o-mini\nğŸŒ Bilingual: Urdu + English\nğŸ’° Cost-effective AI summarization",
        "height": 80,
        "width": 304,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -64,
        -112
      ],
      "typeVersion": 1,
      "id": "c09b3646-0f20-4757-a288-dad0736285c8",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "24baf7ae-6e31-4471-87bb-0600990888d4",
              "name": "date",
              "value": "={{ $now.toFormat('yyyy-MM-dd') }}",
              "type": "string"
            },
            {
              "id": "c31e5ca6-c290-454a-bf74-53a98db76341",
              "name": "day",
              "value": "={{ $now.toFormat('cccc') }}",
              "type": "string"
            },
            {
              "id": "759966f2-bd61-451a-8da7-2be004c42c66",
              "name": "totalEmails",
              "value": "={{ $items.length }}",
              "type": "string"
            },
            {
              "id": "1eebbc03-09ea-41a2-9ecc-6c850ae0d0d5",
              "name": "processingTime",
              "value": "Success",
              "type": "string"
            },
            {
              "id": "bbb9497b-1e53-46ed-adb1-b062b30e53e6",
              "name": "timestamp",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        304,
        -192
      ],
      "id": "92734adc-08ba-4049-97c2-87b750016d56",
      "name": "ğŸ“Š Log Statistics"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1qHDl2iUxHpR-2ZhCMeesCjz3zrOtUeRBXlNDxGFQEK8",
          "mode": "list",
          "cachedResultName": "ğŸ“Š Log to Analytics Dashboard",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1qHDl2iUxHpR-2ZhCMeesCjz3zrOtUeRBXlNDxGFQEK8/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1qHDl2iUxHpR-2ZhCMeesCjz3zrOtUeRBXlNDxGFQEK8/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Day": "={{ $json.sheetDay }}",
            "Total_Emails": "={{ $json.totalEmails }}",
            "Status": "=Success",
            "Timestamp": "={{ $json.sheetTimestamp }}",
            "Date": "={{ $json.sheetDate }}",
            "Processing_Time": "Success"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Day",
              "displayName": "Day",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Total_Emails",
              "displayName": "Total_Emails",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Processing_Time",
              "displayName": "Processing_Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        832,
        -192
      ],
      "id": "19c63159-a46e-407e-a8b6-7503317932bb",
      "name": "Email Analytics Dashboard",
      "retryOnFail": true
    },
    {
      "parameters": {
        "content": "ğŸ“Š GMAIL AUTO-SUMMARIZER PROJECT\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ¯ Purpose: Automated Email Intelligence System\nğŸ‘¨â€ğŸ“ Developer: Abdullah Zahid\nğŸ“ Location: Pakistan\nğŸ“… Date: January 2026\nğŸ“ Project: Azure AI-900 Certification\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâš¡ Features: AI Summarization | Daily Automation\nğŸ“Š Analytics Tracking | Error Handling\n",
        "height": 240,
        "width": 432,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -448,
        -480
      ],
      "typeVersion": 1,
      "id": "4975e94b-9157-48a2-84ca-c3b752da9895",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "ğŸ› ï¸ TECH STACK\n\nğŸ”¹ n8n Workflow Automation\nğŸ”¹ OpenAI GPT-4o-mini\nğŸ”¹ Gmail API Integration\nğŸ”¹ Google Sheets Analytics\nğŸ”¹ JavaScript Processing\n\nğŸ’° Cost: ~$0.10/day\nâš¡ Execution: <30 seconds\n",
        "height": 208,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        624,
        -480
      ],
      "typeVersion": 1,
      "id": "e626ad2a-e879-4d41-965a-1e1d3623ada4",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "ğŸ“Š DATA ANALYTICS\n\nâœ… Google Sheets logging\nâœ… Daily statistics tracking\nâœ… Long-term trend analysis\nâœ… Performance monitoring",
        "height": 128,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        464,
        -160
      ],
      "typeVersion": 1,
      "id": "1f70a094-7f6e-4bf3-a8ba-acc40849b64e",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "ğŸ“§ DELIVERABLE\n\nFormat: HTML Email\nRecipient: Personal inbox\nContent: Consolidated summaries\nAnalytics: Tracked in Google Sheets\nStatus: Automated delivery\n",
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        960,
        -32
      ],
      "typeVersion": 1,
      "id": "f4e0c516-135d-43db-8b27-879d8fb4a98c",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "ğŸ“š DOCUMENTATION & NOTES\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ”¹ Execution Time: ~25-30 seconds | ğŸ”¹ Email Limit: 20 per run\nğŸ”¹ AI Token Usage: ~500 tokens/email | ğŸ”¹ Success Rate: 99%+\nğŸ”¹ Error Handling: Enabled on all critical nodes\nğŸ”¹ Logging: Google Sheets analytics dashboard\n\nğŸ’¡ Future Enhancements: WhatsApp alerts | Priority detection | Weekly digest\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n",
        "height": 240,
        "width": 1952
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -736,
        160
      ],
      "typeVersion": 1,
      "id": "fea74575-af20-47c2-8fbf-ad0ac01f81a3",
      "name": "Sticky Note6"
    }
  ],
  "pinData": {},
  "connections": {
    "If": {
      "main": [
        [
          {
            "node": "Remove label from message",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸ¤– AI: Summarize in Urdu + English",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "â° Daily Schedule": {
      "main": [
        [
          {
            "node": "ğŸ“¥ Gmail: Fetch Important Emails",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“¥ Gmail: Fetch Important Emails": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ¤– AI: Summarize in Urdu + English": {
      "main": [
        [
          {
            "node": "ğŸ“Š Log Statistics",
            "type": "main",
            "index": 0
          },
          {
            "node": "ğŸ”§ Aggregate All Summaries",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”§ Aggregate All Summaries": {
      "main": [
        [
          {
            "node": "ğŸ“§ Gmail: Send Summary Email",
            "type": "main",
            "index": 0
          },
          {
            "node": "Email Analytics Dashboard",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“Š Log Statistics": {
      "main": [
        []
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "9a5d129d-8b4d-46b5-9a8d-80f9cf5f287e",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "bc774d01a36b1358fe79243b064579e1db576ef896fd14a4bb69983aaa2dfc31"
  },
  "id": "scPKlI31_T6CPSzUmwBUW",
  "tags": [
    {
      "updatedAt": "2026-01-19T20:30:39.602Z",
      "createdAt": "2026-01-19T20:30:39.602Z",
      "id": "hBDjjUNkERXv7ZZA",
      "name": "productivity"
    },
    {
      "updatedAt": "2026-01-19T20:30:07.270Z",
      "createdAt": "2026-01-19T20:30:07.270Z",
      "id": "hH3WdiHg2rc9lxat",
      "name": "email-automation"
    },
    {
      "updatedAt": "2026-01-19T20:30:26.694Z",
      "createdAt": "2026-01-19T20:30:26.694Z",
      "id": "t1W8ubeqK0ya22VL",
      "name": "ai-powered"
    }
  ]
}